<!doctype html>
<html lang="pt-br">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="viewport-fit=cover, width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="theme-color" content="#0a0a0f">
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate, max-age=0">
  <meta http-equiv="Pragma" content="no-cache">
  <meta http-equiv="Expires" content="0">
  <meta name="cache-control" content="no-cache">
  <!-- iOS PWA -->
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <link rel="apple-touch-icon" href="public/icons/icon-192x192.webp">
  <link rel="manifest" href="manifest.webmanifest">
  <title>NE√ò.FLOWOFF</title>
  <link rel="stylesheet" href="styles.css?v=1.4.3">
</head>
<body>
  <!-- App Shell -->
  <div id="app">


    <!-- Header simplificado com glass morphism -->
    <header class="topbar blur" id="main-header">
      <div class="header-content">
        <div class="header-logo">
          <img src="public/flowoff logo.png" alt="FlowOFF" class="header-logo-img">
        </div>
      </div>
    </header>

    <!-- Banner de instala√ß√£o PWA -->
    <div id="pwa-install-banner" class="pwa-banner">
      <div class="pwa-content">
        <div class="pwa-icon">üì±</div>
        <div class="pwa-text">
          <strong>Instale o app</strong>
          <span>Adicione √† tela inicial para acesso r√°pido</span>
        </div>
        <button id="pwa-install-btn" class="pwa-btn">Instalar</button>
        <button id="pwa-dismiss" class="pwa-dismiss">√ó</button>
      </div>
    </div>

    <!-- Conte√∫do com √°reas "rotas" -->
    <main id="router">
      <!-- HOME / HERO-PORTF√ìLIO -->
      <section class="route active" id="home">
        <div class="hero-card neon">
          
          <!-- Part√≠culas decorativas -->
          <div class="particles-container">
            <div class="particle"></div>
            <div class="particle"></div>
            <div class="particle"></div>
          </div>

          <!-- Conte√∫do -->
          <h1>Marketing, IA e blockchain</h1>
          <p>s·¥è ü·¥ú·¥ÑÃß·¥èÃÉ·¥ás ·¥Ö·¥á ·¥ç·¥ã·¥õ | s…™s·¥õ·¥á·¥ç·¥Äs, …™·¥Äs ·¥á ·¥°·¥á ô·¥Ä·¥ò·¥òs</p>
          <p>Do branding ao backend, da narrativa ao token ‚Äî somos a ponte entre sua vis√£o e o novo mundo digital.</p>

          <div class="cta-row">
            <a class="btn primary" href="https://wa.me/+5562983231110" target="_blank" rel="noopener">Iniciar projeto</a>
          </div>
        </div>

        <!-- Se√ß√£o FlowOFF Moderna -->
        <div class="flowoff-section">
          <div class="flowoff-card neon">
            <div class="flowoff-header">
              <div class="flowoff-logo">
                <img src="public/flowoff logo.png" alt="FlowOFF" class="flowoff-logo-img">
              </div>
              <div class="flowoff-title">
                <h2>FlowOFF</h2>
                <span class="flowoff-subtitle">Ag√™ncia de Marketing Blockchain</span>
              </div>
            </div>
            
            <div class="flowoff-content">
              <p class="flowoff-description">
                FlowOFF √© ag√™ncia que j√° fez gest√£o de redes sociais comum, uma solu√ß√£o que muitas empresas buscam mas n√£o sabem que uma nova estrat√©gia j√° est√° sendo usada e que poucos sabem ou possuem abordagem vision√°ria de estrat√©gias e tecnologias que fazem todo o diferencial para o rompimento das barreiras que levam aos resultados reais.
              </p>
              
              <div class="flowoff-features">
                <div class="feature-item">
                  <div class="feature-icon">üéØ</div>
                  <div class="feature-text">
                    <h4>Consultoria Estrat√©gica</h4>
                    <p>Novas t√°ticas e estrat√©gias personalizadas</p>
                  </div>
                </div>
                
                <div class="feature-item">
                  <div class="feature-icon">üìä</div>
                  <div class="feature-text">
                    <h4>Gest√£o de Dados</h4>
                    <p>Solu√ß√µes inteligentes para cada organiza√ß√£o</p>
                  </div>
                </div>
                
                <div class="feature-item">
                  <div class="feature-icon">üöÄ</div>
                  <div class="feature-text">
                    <h4>Tecnologias Avan√ßadas</h4>
                    <p>Desenvolvimento sob medida para seu neg√≥cio</p>
                  </div>
                </div>
              </div>
              
              <div class="flowoff-cta">
                <a href="https://wa.me/+5562983231110" target="_blank" rel="noopener" class="btn primary flowoff-btn">
                  <img src="public/mello.webp" alt="MELL√ò" class="mello-photo">
                  <span>Falar com MELL√ò‚Ñ¢</span>
                  <div class="btn-shimmer"></div>
                </a>
              </div>
            </div>
          </div>
        </div>


        <div class="grid">
          <!-- mocks/prints -->
          <article class="card glow">
            <div class="thumb thumb-1"></div>
            <h3>WebApp</h3>
            <p>Desenvolvimento de aplica√ß√µes web modernas e responsivas.</p>
          </article>

          <article class="card glow">
            <div class="thumb thumb-2">
              <div class="gamification-preview">
                <div class="xp-bar">
                  <div class="xp-fill"></div>
                  <span class="xp-text">Level 12</span>
                </div>
                <div class="badges-row">
                  <div class="badge-icon">üèÜ</div>
                  <div class="badge-icon">‚≠ê</div>
                  <div class="badge-icon">üéØ</div>
                </div>
                <div class="leaderboard-mini">
                  <div class="leader-item">1. Ana Silva</div>
                  <div class="leader-item">2. Jo√£o Santos</div>
                  <div class="leader-item">3. Maria Costa</div>
                </div>
              </div>
            </div>
            <h3>Dashboards Gamificados</h3>
            <p>Transforme relat√≥rios frios em experi√™ncias interativas com n√≠veis, pontos e recompensas.</p>
          </article>

          <article class="card glow">
            <div class="thumb thumb-5"></div>
            <h3>NE√ò.FLOWOFF</h3>
            <p>Laborat√≥rio de marketing, blockchain e sistemas digitais.</p>
          </article>

          <article class="card glow">
            <div class="thumb thumb-6">
              <img src="public/logos/pink_metalic.png" alt="Contato MELL√ò" class="contact-icon">
            </div>
            <h3>Entre em contato</h3>
            <p>Entre em contato para entender mais sobre como seu neg√≥cio pode avan√ßar no digital. Fale com MELL√ò‚Ñ¢</p>
          </article>
        </div>
      </section>

      <!-- PROJETOS -->
      <section class="route" id="projects">
        <div class="section-title">Projetos</div>
        <div class="list">
          <div class="list-item">
            <div>
              <h4>Site/WebApp sob medida</h4>
              <p>Performance, acessibilidade, convers√£o. Sem modinha.</p>
            </div>
            <button class="chip">ver</button>
          </div>
          <div class="list-item">
            <div>
              <h4>SAAS / BAAS</h4>
              <p>Produtos prontos ou personalizados, com integra√ß√µes.</p>
            </div>
            <button class="chip">detalhes</button>
          </div>
          <div class="list-item">
            <div>
              <h4>Integra√ß√£o cripto</h4>
              <p>Wallet, pagamentos, tokens. Sem teatrinho.</p>
            </div>
            <button class="chip">ver</button>
          </div>
          <div class="list-item">
            <div>
              <h4>POST√òN</h4>
              <p>Gest√£o inteligente de redes sociais com IA e automa√ß√µes.</p>
            </div>
            <button class="chip">ver</button>
          </div>
          <div class="list-item">
            <div>
              <h4>PRO.IA</h4>
              <p>Treinamento para transformar IA em faturamento real.</p>
            </div>
            <button class="chip">ver</button>
          </div>
        </div>
      </section>

      <!-- CAPTA√á√ÉO (form) -->
      <section class="route" id="start">
        <div class="section-title">Iniciar Projeto</div>
        <form id="lead-form" class="card form glow">
          <label>Nome<input name="name" required></label>
          <label>Email<input type="email" name="email" required></label>
          <label>WhatsApp<input name="whats" placeholder="+55 (00) 00000-0000" required></label>
          <label>Tipo de projeto
            <select name="type" required>
              <option value="site">Site / WebApp</option>
              <option value="saas">SAAS / BAAS</option>
              <option value="poston">POST√òN</option>
              <option value="proia">PRO.IA</option>
            </select>
          </label>
          <button class="btn primary" type="submit">Enviar</button>
          <p class="muted center" id="lead-status"></p>
        </form>
      </section>

      <!-- ECOSSISTEMA (selos finais) -->
      <section class="route" id="ecosystem">
        <div class="section-title">Ecossistema</div>
        <div class="badges">
          <div class="badge glass">
            <img alt="FlowPay" src="public/FLOWPAY.png">
            <div><b>FlowPay</b><span>Pagamentos integrados</span></div>
          </div>
          <div class="badge glass">
            <img alt="NE√ò Protocol" src="public/neo_ico.png">
            <div><b>NE√ò Protocol</b><span>Camada tecnol√≥gica</span></div>
          </div>
          <div class="badge glass">
            <img alt="POST√òN" src="public/icon-512x512.png">
            <div><b>POST√òN</b><span>Gest√£o de redes sociais</span></div>
          </div>
          <div class="badge glass">
            <img alt="NE√ò.FLOWOFF" src="public/flowoff logo.png">
            <div><b>NE√ò.FLOWOFF</b><span>Assinatura criativa</span></div>
          </div>
        </div>
      </section>

      <!-- Modal lead r√°pido -->
      <dialog id="lead" class="sheet">
        <form method="dialog" class="sheet-body">
          <h3>Falar direto comigo</h3>
          <p>Respondo r√°pido. Sem burocracia.</p>
          <a class="btn primary block" href="https://wa.me/5551999999999" target="_blank" rel="noopener">WhatsApp</a>
          <button class="btn ghost block">Fechar</button>
        </form>
      </dialog>

      <!-- Modal do Agente NEO -->
      <dialog id="agent-modal" class="sheet agent-modal">
        <div class="sheet-body">
          <div class="agent-modal-header">
            <h3>ü§ñ Agente NEO FlowOff</h3>
            <button class="agent-close" data-close="agent-modal">√ó</button>
          </div>
          <div class="agent-chat-container">
            <div id="agent-messages" class="agent-messages"></div>
            <div class="agent-input-container">
              <input type="text" id="agent-input" placeholder="Digite sua mensagem..." autocomplete="off">
              <button id="agent-send" class="agent-send-btn">Enviar</button>
            </div>
          </div>
          <div class="agent-actions">
            <button class="btn ghost small" id="agent-clear">Limpar</button>
            <button class="btn ghost small" id="agent-leads">Ver Leads</button>
          </div>
        </div>
      </dialog>


      <!-- Offline banner -->
      <div id="offline" class="offline">Sem conex√£o. Funcionalidades limitadas.</div>
    </main>

    <!-- Tab bar iOS-like -->
    <nav class="tabbar blur">
      <button data-route="home" class="active">Home</button>
      <button data-route="projects">Projetos</button>
      <button data-route="start">Iniciar</button>
      <button data-route="ecosystem">Ecossistema</button>
    </nav>

    <!-- Footer iOS-like -->
    <footer class="footer">
      <p class="footer-text">Ag√™ncia de Marketing na blockchain | Desenvolvimento de sistemas, WebApp's e IAs</p>
    </footer>

    <!-- Widget de Atendimento Flutuante -->
    <div id="agent-widget" class="agent-widget">
      <div class="agent-widget-toggle" id="agent-widget-toggle">
        <img src="public/neo_ico.png" alt="NEO" class="agent-widget-icon">
        <span class="agent-widget-text">Atendimento</span>
      </div>
      <div class="agent-widget-popup" id="agent-widget-popup">
        <div class="agent-widget-header">
          <h4>ü§ñ Agente NEO FlowOff</h4>
          <button class="agent-widget-close" id="agent-widget-close">√ó</button>
        </div>
        <div class="agent-widget-iframe-container">
          <iframe 
            src="https://agent-neo-flowoff.vercel.app/embed" 
            width="100%" 
            height="500" 
            frameborder="0"
            style="border: none; border-radius: 10px;">
          </iframe>
        </div>
      </div>
    </div>
  </div>

  <!-- p5.js para efeitos visuais -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.7.0/p5.min.js"></script>
  <script src="p5-background.js?v=1.4.3"></script>
  
  <script src="app.js?v=1.4.3" type="module"></script>
  <script>
    // Force CSS reload
    const link = document.querySelector('link[href*="styles.css"]');
    if (link) {
      link.href = link.href.split('?')[0] + '?v=' + Date.now();
    }

    // PWA Install Banner
    let deferredPrompt;
    let bannerShown = false;
    const pwaBanner = document.getElementById('pwa-install-banner');
    const installBtn = document.getElementById('pwa-install-btn');
    const dismissBtn = document.getElementById('pwa-dismiss');

    // Debug: Log inicial
    console.log('üîç PWA Banner Debug:');
    console.log('- Banner element:', pwaBanner);
    console.log('- Install button:', installBtn);
    console.log('- Dismiss button:', dismissBtn);
    console.log('- PWA dismissed:', localStorage.getItem('pwa-dismissed'));
    console.log('- Standalone mode:', window.matchMedia('(display-mode: standalone)').matches);

    // Verificar se j√° foi instalado ou dispensado
    if (localStorage.getItem('pwa-dismissed') === 'true' || window.matchMedia('(display-mode: standalone)').matches) {
      console.log('üö´ Banner ocultado: j√° foi dispensado ou est√° em modo standalone');
      pwaBanner.style.display = 'none';
    }

    // Escutar evento beforeinstallprompt
    window.addEventListener('beforeinstallprompt', (e) => {
      console.log('üì± PWA install prompt dispon√≠vel');
      e.preventDefault();
      deferredPrompt = e;
      
      // Mostrar banner apenas se n√£o foi dispensado
      if (localStorage.getItem('pwa-dismissed') !== 'true') {
        console.log('‚úÖ Exibindo banner PWA');
        pwaBanner.style.display = 'block';
        pwaBanner.classList.add('show');
        bannerShown = true;
      } else {
        console.log('üö´ Banner n√£o exibido: j√° foi dispensado');
      }
    });

    // Fallback: Mostrar banner ap√≥s 3 segundos se n√£o foi dispensado (para teste)
    setTimeout(() => {
      if (!bannerShown && localStorage.getItem('pwa-dismissed') !== 'true' && !window.matchMedia('(display-mode: standalone)').matches) {
        console.log('‚è∞ Fallback: Exibindo banner ap√≥s timeout');
        pwaBanner.style.display = 'block';
        pwaBanner.classList.add('show');
        bannerShown = true;
      }
    }, 3000);

    // Bot√£o instalar
    installBtn.addEventListener('click', async () => {
      if (deferredPrompt) {
        console.log('Tentando instalar PWA...');
        try {
          deferredPrompt.prompt();
          const { outcome } = await deferredPrompt.userChoice;
          console.log('Resultado da instala√ß√£o:', outcome);
          
          if (outcome === 'accepted') {
            pwaBanner.style.display = 'none';
            pwaBanner.classList.remove('show');
            bannerShown = false;
            console.log('PWA instalado com sucesso');
          }
          deferredPrompt = null;
        } catch (error) {
          console.error('Erro ao instalar PWA:', error);
        }
      }
    });

    // Bot√£o dispensar
    dismissBtn.addEventListener('click', () => {
      pwaBanner.style.display = 'none';
      pwaBanner.classList.remove('show');
      bannerShown = false;
      localStorage.setItem('pwa-dismissed', 'true');
      console.log('Banner PWA dispensado');
    });

    // Auto-hide ap√≥s 15 segundos (aumentado)
    setTimeout(() => {
      if (bannerShown && pwaBanner.style.display !== 'none') {
        console.log('Auto-hiding PWA banner');
        pwaBanner.style.opacity = '0';
        setTimeout(() => {
          pwaBanner.style.display = 'none';
          pwaBanner.classList.remove('show');
          bannerShown = false;
        }, 300);
      }
    }, 15000);

    // Detectar se PWA foi instalado
    window.addEventListener('appinstalled', () => {
      console.log('PWA foi instalado');
      pwaBanner.style.display = 'none';
      pwaBanner.classList.remove('show');
      bannerShown = false;
    });

    // Fun√ß√£o para testar o banner manualmente (debug)
    window.testPWAInstall = () => {
      if (pwaBanner) {
        pwaBanner.style.display = 'block';
        pwaBanner.classList.add('show');
        bannerShown = true;
        console.log('Banner PWA exibido manualmente');
      }
    };

    // Fun√ß√£o para limpar o estado do banner (debug)
    window.clearPWAState = () => {
      localStorage.removeItem('pwa-dismissed');
      console.log('Estado PWA limpo');
    };

    // Efeito de blur no header durante scroll
    const header = document.getElementById('main-header');
    let lastScrollY = window.scrollY;
    let ticking = false;

    function updateHeader() {
      const scrollY = window.scrollY;
      
      if (scrollY > 50) {
        header.classList.add('scrolled');
      } else {
        header.classList.remove('scrolled');
      }
      
      lastScrollY = scrollY;
      ticking = false;
    }

    function requestTick() {
      if (!ticking) {
        requestAnimationFrame(updateHeader);
        ticking = true;
      }
    }

    window.addEventListener('scroll', requestTick, { passive: true });
  </script>
</body>
</html>
